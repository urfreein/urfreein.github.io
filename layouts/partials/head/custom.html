{{- if .Params.image -}}
<!-- Preload LCP image with high priority -->
<link rel="preload" as="image" href="{{ .Params.image }}" fetchpriority="high">

<script>
// Add fetchpriority to first featured image
(function() {
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setFetchPriority);
  } else {
    setFetchPriority();
  }
  
  function setFetchPriority() {
    var firstImg = document.querySelector('.article-list article:first-child .article-image img, article:first-of-type .article-image img');
    if (firstImg) {
      firstImg.setAttribute('fetchpriority', 'high');
      firstImg.setAttribute('decoding', 'async');
    }
  }
})();
</script>
{{- end -}}
